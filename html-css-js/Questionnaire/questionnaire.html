<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Questionnaire</title>
  <!-- Load your shared CSS file (one level up) -->
  <link rel="stylesheet" href="../styles.css">
</head>
<body id="top">

  <!-- ====================== PAGE TITLE ====================== -->
  <h2>Questionnaire</h2>
  <h3>Choose the correct answer</h3>

  <!-- Button to go to reviewer (optional, can stay) -->
  <h1><a href="reviewer.html"><button>Go to Reviewer</button></a></h1>

  <!-- ====================== QUIZ FORM ====================== -->
  <div class="questionnaireContainer">
    <form id="questionnaireForm" action="">

      <!-- QUESTION 1 -->
      <p id="question1"><strong>Question 1:</strong> What does HTML stand for?</p>
      <ol type="a">
        <li><input type="radio" name="q1" id="q1a" value="HowToMakeLumpia"><label for="q1a" class="questionOptions">How to Make Lumpia</label></li>
        <li><input type="radio" name="q1" id="q1b" value="HyperText Markup Language"><label for="q1b" class="questionOptions">HyperText Markup Language</label></li>
        <li><input type="radio" name="q1" id="q1c" value="HowToMakeLoop"><label for="q1c" class="questionOptions">How to Make Loop</label></li>
      </ol>

      <!-- QUESTION 2 -->
      <p><strong>Question 2:</strong> What does "&lt;a&gt;" stand for?</p>
      <ol type="a">
        <li><input type="radio" name="q2" id="q2a" value="HTML <a> href Attribute"><label for="q2a" class="questionOptions">HTML &lt;a&gt; href Attribute</label></li>
        <li><input type="radio" name="q2" id="q2b" value="HTML <a> align Attribute"><label for="q2b" class="questionOptions">HTML &lt;a&gt; align Attribute</label></li>
        <li><input type="radio" name="q2" id="q2c" value="HTML <a> alink Attribute"><label for="q2c" class="questionOptions">HTML &lt;a&gt; alink Attribute</label></li>
      </ol>

      <!-- ... (Questions 3–19 are the same — keep your current ones) ... -->

      <!-- QUESTION 20 (last one) -->
      <p><strong>Question 20:</strong> Which CSS property is used to set the space between lines of text?</p>
      <ol type="a">
        <li><input type="radio" name="q20" id="q20a" value="line-spacing"><label for="q20a" class="questionOptions">line-spacing</label></li>
        <li><input type="radio" name="q20" id="q20b" value="line-height"><label for="q20b" class="questionOptions">line-height</label></li>
        <li><input type="radio" name="q20" id="q20c" value="letter-spacing"><label for="q20c" class="questionOptions">letter-spacing</label></li>
      </ol>

      <!-- ====================== SUBMIT BUTTON ====================== -->
      <button type="button" class="submitBtn" id="openConfirm">Submit</button>
    </form>
  </div>

  <!-- ====================== CONFIRM POPUP ====================== -->
  <div id="confirmBox" class="confirmBox">
    <div class="confirmBox-content">
      <p>Are you sure you want to submit your answers?</p>
      <div class="confirmButtons">
        <button id="confirmYes" class="confirmBtn">Submit</button>
        <button id="confirmNo" class="cancelBtn">Cancel</button>
      </div>
    </div>
  </div>

  <!-- ====================== RETURN TO TOP BUTTON ====================== -->
  <button id="returnTop">Return to Top</button>

  <!-- ====================== MAIN SCRIPT (HEAVILY COMMENTED) ====================== -->
  <script>
    // ———————————————————————————————————
    // 1. GET ALL IMPORTANT ELEMENTS
    // ———————————————————————————————————
    const openConfirm = document.getElementById("openConfirm");   // Submit button
    const confirmBox   = document.getElementById("confirmBox");   // Popup
    const confirmYes   = document.getElementById("confirmYes");   // Yes → submit
    const confirmNo    = document.getElementById("confirmNo");    // No → cancel
    const container    = document.querySelector(".questionnaireContainer"); // Scrollable area
    const returnTop    = document.getElementById("returnTop");    // Back to top button

    // ———————————————————————————————————
    // 2. SHOW/HIDE "RETURN TO TOP" BUTTON
    // ———————————————————————————————————
    container.addEventListener("scroll", () => {
      // Show button only when scrolled down > 200px
      returnTop.classList.toggle("show", container.scrollTop > 200);
    });

    returnTop.addEventListener("click", () => {
      // Smooth scroll back to top
      container.scrollTo({ top: 0, behavior: "smooth" });
    });

    // ———————————————————————————————————
    // 3. OPEN / CLOSE CONFIRMATION POPUP
    // ———————————————————————————————————
    openConfirm.addEventListener("click", () => {
      confirmBox.style.display = "flex"; // Show popup
    });

    confirmNo.addEventListener("click", () => {
      confirmBox.style.display = "none"; // Hide popup
    });

    // ———————————————————————————————————
    // 4. SUBMIT → CALCULATE SCORE → SAVE → GO TO REVIEWER
    // ———————————————————————————————————
    confirmYes.addEventListener("click", () => {
      confirmBox.style.display = "none"; // Hide popup

      // ——— Correct answers (must match the label text exactly) ———
      const correctAnswers = {
        q1:  "HyperText Markup Language",
        q2:  "HTML <a> href Attribute",
        q3:  "Tim Berners-Lee",
        q4:  "&lt;img src=\"w3schools.jpg\" alt=\"W3Schools.com\" width=\"104\" height=\"142\"&gt;",
        q5:  "&lt;br&gt;",
        q6:  "&lt;style&gt;",
        q7:  "&lt;strong&gt; or &lt;b&gt;",
        q8:  "background-color",
        q9:  "p {color: red;}",
        q10: "font-family",
        q11: "&lt;h1&gt;",
        q12: "&lt;p&gt;",
        q13: "&lt;a&gt;",
        q14: "alt",
        q15: "font-size",
        q16: "padding",
        q17: "Cascading Style Sheets",
        q18: "text-align",
        q19: "&lt;ul&gt;",
        q20: "line-height"
      };

      let score = 0; // Count correct answers

      // ——— Loop through each question ———
      for (const [question, correct] of Object.entries(correctAnswers)) {
        const selected = document.querySelector(`input[name="${question}"]:checked`);
        if (selected && selected.value === correct) {
          score++; // +1 if correct
        }
      }

      // ——— Save score to browser (so reviewer can read it) ———
      localStorage.setItem('quizScore', score);

      // ——— Redirect to reviewer after small delay (smooth) ———
      setTimeout(() => {
        window.location.href = "reviewer.html";
      }, 300);
    });
  </script>
</body>
</html>