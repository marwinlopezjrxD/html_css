<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Result</title>
    <!-- Load shared CSS (one folder up) -->
    <link rel="stylesheet" href="../styles.css">
    <style>
        /* Minimal styles for result animation & display only - no overrides */
        #scoreDisplay { 
            font-size: 4rem; 
            font-weight: bold; 
            margin: 20px 0; 
            min-height: 80px; 
            transition: all 0.3s ease; 
            color: #e0d7ff; /* Matches your theme */
        }
        #resultText { 
            font-size: 2rem; 
            margin: 20px 0; 
        }
        .pass { color: #90ee90 !important; } /* Green for pass */
        .fail { color: #ff6b6b !important; } /* Red for fail */
        body { 
            background: linear-gradient(135deg, #1a0033, #0a0a23); /* Saturn theme tie-in */
            color: #e0d7ff; 
            text-align: center; 
            padding: 40px 20px; 
        }
        #revealBtn { 
            padding: 12px 30px; 
            background: #9d4edd; 
            color: white; 
            border: none; 
            border-radius: 50px; 
            cursor: pointer; 
            font-size: 1.1rem; 
            margin: 20px; 
        }
        @media (max-width: 600px) { 
            #scoreDisplay { font-size: 3rem; } 
        }
    </style>
</head>
<body>
    <h1>Quiz Results</h1>
    <p>Your score out of 20:</p>
    
    <div id="scoreDisplay">Click below to reveal!</div>
    <div id="resultText"></div>
    
    <button id="revealBtn">Reveal Score</button>
    
    <div style="margin-top: 30px;">
        <button onclick="window.location.href='questionnaire.html'">Retake Quiz</button>
        <button onclick="window.location.href='reviewer.html'">View Answers</button>
    </div>

    <!-- Audio Elements -->
    <audio id="vineBoom" preload="auto">
        <source src="https://raw.githubusercontent.com/marwinlopezjrxD/html_css/master/html-css-js/Questionnaire/sounds/Vine%20boom.ogg" type="audio/ogg">
    </audio>
    <audio id="passSound" preload="auto">
        <source src="https://raw.githubusercontent.com/marwinlopezjrxD/html_css/master/html-css-js/Questionnaire/sounds/success-340660.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Get score from localStorage
        const score = parseInt(localStorage.getItem('quizScore') || '0');
        const total = 20;
        const percentage = Math.round((score / total) * 100);
        const isPass = score >= 16; // 80% threshold

        const scoreDisplay = document.getElementById('scoreDisplay');
        const resultText = document.getElementById('resultText');
        const revealBtn = document.getElementById('revealBtn');

        revealBtn.addEventListener('click', () => {
            revealBtn.style.display = 'none'; // Hide button after click

            // Random number animation (2 seconds flicker)
            let fakeScore = 0;
            const flickerInterval = setInterval(() => {
                fakeScore = Math.floor(Math.random() * (total + 1));
                scoreDisplay.textContent = fakeScore;
                scoreDisplay.style.transform = 'scale(1.1)';
                setTimeout(() => { scoreDisplay.style.transform = 'scale(1)'; }, 100);
            }, 150);

            setTimeout(() => {
                clearInterval(flickerInterval);
                scoreDisplay.textContent = score + '/' + total + ' (' + percentage + '%)';

                if (isPass) {
                    resultText.textContent = 'PASS! Great job!';
                    resultText.className = 'pass';
                    document.getElementById('passSound').play().catch(e => console.log('Pass sound failed:', e));
                } else {
                    resultText.textContent = 'FAIL! Keep studying.';
                    resultText.className = 'fail';
                    document.getElementById('vineBoom').play().catch(e => console.log('Vine Boom failed:', e));
                }
            }, 2000);
        });
    </script>
</body>
</html>